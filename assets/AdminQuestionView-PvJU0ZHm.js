import{d as q,r as d,o as F,u as K,w as M,c as x,a as n,b as h,t as i,e as r,f as Q,g as Y,n as v,F as z,h as S,i as U,v as j,j as V,k as L,l as a}from"./index-CKAy8MsP.js";const X={class:"w-full flex flex-col items-center min-h-screen bg-retro-bg text-white p-4 font-retro"},G={key:0,class:"text-2xl animate-pulse text-retro-accent"},H={key:1,class:"text-red-500 text-2xl border-4 border-red-500 p-8 bg-black/80"},J={key:2,class:"w-full max-w-4xl flex flex-col gap-6 animate-in fade-in duration-200"},Z={class:"w-full bg-blue-900/50 border-4 border-blue-500 p-4 flex justify-between items-center"},P={class:"flex gap-4 items-center"},ee={class:"font-mono"},te={class:"ml-4"},re={key:0,class:"mb-6 flex justify-center"},le={class:"border-4 border-black p-1 bg-gray-900 inline-block"},se=["src"],oe={class:"text-xl md:text-2xl text-center leading-relaxed drop-shadow-md"},ne={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full"},ae=["onClick"],ue={class:"flex items-center gap-3 relative z-10"},ce={class:"text-lg group-hover:text-white font-bold"},ie={key:1,class:"w-full flex flex-col items-center gap-6"},de={class:"flex flex-wrap justify-center gap-2"},ve=["maxlength"],pe={key:2,class:"w-full flex flex-col items-center gap-4"},xe=q({__name:"AdminQuestionView",setup(be){const g=K(),w=Y(),y=d(!0),b=d(""),l=d(null),u=d(""),_=d(null),k=d(null),c=d(""),p=d("");async function C(e){y.value=!0,b.value="",c.value="",k.value=null,u.value="";try{const t=await fetch("/quizzes.json");if(!t.ok)throw new Error("Failed to fetch quizzes");const o=(await t.json()).find(D=>D.id===e);o?(l.value=o,o.type===1&&(l.value.answers=o.answers.sort(()=>.5-Math.random())),o.type===2&&R()):(b.value=`Quiz ID ${e} not found.`,l.value=null)}catch(t){b.value=t.message}finally{y.value=!1}}function I(e){const s=(l.value?.id||Number(g.params.id)||1)+e;w.push(`/admin/question/${s}`)}F(()=>{C(Number(g.params.id))}),M(()=>g.params.id,e=>{C(Number(e))});const m=x(()=>{switch(l.value?.type){case 2:return"border-yellow-500";case 3:return"border-red-500";default:return"border-green-500"}}),T=x(()=>{switch(l.value?.type){case 2:return"text-yellow-500";case 3:return"text-red-500";default:return"text-green-500"}});function $(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")?e:`/${e}`:""}function B(e){console.log(e)}const E=x(()=>{const e=l.value?.answers.find(t=>t.isCorrect);return e?e.text.trim().toUpperCase():""}),f=x(()=>E.value.split("")),O=x(()=>f.value.filter(e=>e!==" ").length);function W(e){if(f.value[e]===" ")return" ";let s=0;for(let o=0;o<e;o++)f.value[o]!==" "&&s++;return u.value[s]||""}function R(){L(()=>_.value?.focus())}M(u,e=>{l.value?.type===2&&e.includes(" ")&&(u.value=e.replace(/\s/g,"")),u.value=u.value.toUpperCase()});function A(){let e="",t=0;for(const s of f.value)s===" "?e+=" ":(e+=u.value[t]||"",t++);e===E.value?(c.value="CORRECT!",p.value="text-green-500"):(c.value="INCORRECT",p.value="text-red-500")}function N(){const e=l.value?.answers.find(o=>o.isCorrect),t=e?e.text.toUpperCase().trim():"",s=u.value.toUpperCase().trim();t&&s===t?(c.value="CORRECT!",p.value="text-green-500"):(c.value="INCORRECT",p.value="text-red-500")}return(e,t)=>(a(),n("div",X,[y.value?(a(),n("div",G," LOADING ADMIN VIEW... ")):b.value?(a(),n("div",H,i(b.value),1)):l.value?(a(),n("div",J,[r("div",Z,[t[5]||(t[5]=r("h1",{class:"text-xl font-bold"},"ADMIN PREVIEW MODE",-1)),r("div",P,[r("button",{onClick:t[0]||(t[0]=s=>I(-1)),class:"px-3 py-1 bg-blue-700 hover:bg-blue-600 border border-blue-400"},"◀ PREV"),r("span",ee,"ID: "+i(l.value.id),1),r("button",{onClick:t[1]||(t[1]=s=>I(1)),class:"px-3 py-1 bg-blue-700 hover:bg-blue-600 border border-blue-400"},"NEXT ▶"),r("span",te,"TYPE: "+i(l.value.type),1),r("button",{onClick:t[2]||(t[2]=s=>Q(w).push("/")),class:"ml-4 underline hover:text-blue-300"},"EXIT")])]),r("div",{class:v(["w-full bg-retro-bg/90 border-4 p-6 relative shadow-[8px_8px_0_0_rgba(0,0,0,0.5)] transition-colors duration-200",m.value])},[r("div",{class:v(["absolute top-2 right-2 text-xs font-bold px-2 py-1 bg-black/50 border rounded",[T.value,m.value]])},i(l.value.type===1?"EASY":l.value.type===2?"MEDIUM":"HARD"),3),l.value.image?(a(),n("div",re,[r("div",le,[r("img",{src:$(l.value.image),class:"max-h-36 object-contain"},null,8,se)])])):h("",!0),r("h3",oe,i(l.value.question),1)],2),l.value.type===1?(a(),n("div",ne,[(a(!0),n(z,null,S(l.value.answers,(s,o)=>(a(),n("button",{key:o,onClick:D=>B(o),class:v(["group relative p-4 bg-retro-primary/80 hover:bg-black/50 text-left transition-all border-2 border-retro-border hover:-translate-y-1 hover:shadow-[4px_4px_0_0_#000]",[k.value===o?s.isCorrect?"!border-green-400 !bg-green-500 !text-black":"!border-red-400 !bg-red-500 !text-black":"hover:border-white"]])},[r("div",ue,[r("span",{class:v(["group-hover:text-white",T.value])},"➤",2),r("span",ce,i(s.text),1)])],10,ae))),128))])):l.value.type===2?(a(),n("div",ie,[r("div",de,[(a(!0),n(z,null,S(f.value,(s,o)=>(a(),n("div",{key:o,class:v(["w-10 h-12 md:w-12 md:h-14 border-b-4 bg-black/40 flex items-center justify-center text-2xl font-bold uppercase transition-all",[m.value,s===" "?"border-none":"text-white"]])},i(W(o)),3))),128))]),U(r("input",{ref_key:"inputRef",ref:_,"onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s),type:"text",class:"opacity-0 absolute",onKeyup:V(A,["enter"]),maxlength:O.value},null,40,ve),[[j,u.value]]),r("div",{class:"flex gap-4"},[r("button",{onClick:R,class:"px-6 py-2 bg-gray-800 border-2 border-white hover:bg-gray-700"}," TYPE ANSWER "),r("button",{onClick:A,class:"px-6 py-2 bg-yellow-700 border-2 border-white hover:bg-yellow-600 font-bold"}," SUBMIT (TEST) ")]),c.value?(a(),n("p",{key:0,class:v(["text-xl font-bold",p.value])},i(c.value),3)):h("",!0)])):l.value.type===3?(a(),n("div",pe,[U(r("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value=s),class:"w-full max-w-lg bg-black/60 border-2 border-red-500 p-4 text-2xl text-center text-white focus:outline-none focus:border-red-400",placeholder:"Type your answer...",onKeyup:V(N,["enter"])},null,544),[[j,u.value]]),r("button",{onClick:N,class:"px-8 py-3 bg-red-800 border-2 border-red-400 hover:bg-red-700 text-white font-bold text-xl"}," SUBMIT FATE (TEST) "),c.value?(a(),n("p",{key:0,class:v(["text-xl font-bold",p.value])},i(c.value),3)):h("",!0)])):h("",!0)])):h("",!0)]))}});export{xe as default};
